{% if section.settings.mode != 'disabled' %}

<div
  id="NewsletterPopup-{{ section.id }}"
  class="modal modal--square modal--mobile-friendly"
  data-section-id="{{ section.id }}"
  data-section-type="newsletter-popup"
  data-delay-days="{{ section.settings.popup_days }}"
  data-delay-seconds="{{ section.settings.popup_seconds }}"
  data-test-mode="{% if section.settings.mode == 'testing' %}true{% else %}false{% endif %}">
  <div class="modal__inner">
    <div class="modal__centered medium-up--text-center">
      <div class="modal__centered-content">
			
        <div class="newslatter-popup">
		<div class="newslatter-popup-left-col">
<!-- 			<img src="{{ section.settings.popup_image | img_url: 'master' }}" alt="popup"> -->
          	<style>
             
                .newslatter-popup-left-col {
                  background-image: url("{{ section.settings.popup_image | img_url: 'master' }}");
                }
             
            </style>
		</div>
		<div class="newslatter-popup-right-col">
			<div class="newslatter-popup-head">
				<!-- <button aria-label="Close" class="promo-popup__close btn styled-outline" data-dismiss="modal" id="close-button">
				<svg class="icon-close" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" stroke="#000"><g stroke-linecap="square"><path d="M4 4L16 16M16 4L4 16"></path></g></svg>

				</button> -->
			</div>
			<div class="popup-text-box">
              {% if section.settings.popup_title != blank %}
				<h3>{{ section.settings.popup_title }}</h3>
              {% endif %}
              {% if section.settings.popup_subtitle != blank %}
				<h4>{{ section.settings.popup_subtitle }}</h4>
              {% endif %}
              <h2><strong>20% OFF</strong></h2>
              <span>On your first order.*</span>
<!-- 				<p>On full-price items until 22nd December.*</p> -->
              
              {% if section.settings.enable_newsletter %}
                <div class="popup-cta">
                    {% include 'newsletter-form', section_id: section.id, snippet_context: 'popup' %}
                </div>
              {% endif %}

                <div class="popup-footer-text">
                    {{ section.settings.popup_text }}
                </div>
			</div>
			
		</div>
		</div>
        
      </div>

      <button type="button" class="modal__close js-modal-close text-link">
        <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64"><path d="M19 17.61l27.12 27.13m0-27.12L19 44.74"/></svg>
        <span class="icon__fallback-text">{{ 'general.accessibility.close_modal' | t | json }}</span>
      </button>
    </div>
  </div>
</div>

{% endif %}

{% schema %}
  {
    "name": "Popup",
    "class": "index-section--hidden",
    "settings": [
      {
        "type": "select",
        "id": "mode",
        "label": "Display mode",
        "default": "disabled",
        "options": [
          {
            "value": "enabled",
            "label": "Enabled"
          },
          {
            "value": "testing",
            "label": "Test mode"
          },
          {
            "value": "disabled",
            "label": "Disabled"
          }
        ],
        "info": "Test mode displays your popup each time even after dismissing it. Switch to Enabled once you are happy with how your popup looks."
      },
      {
        "type": "range",
        "id": "popup_seconds",
        "label": "Delay",
        "info": "Delay is disabled in theme editor for visibility",
        "default": 5,
        "min": 2,
        "max": 60,
        "step": 1,
        "unit": "sec"
      },
      {
        "type": "range",
        "id": "popup_days",
        "label": "Frequency",
        "default": 30,
        "info": "Number of days before a dismissed popup reappears",
        "min": 2,
        "max": 30,
        "step": 1,
        "unit": "day"
      },
      {
        "type": "header",
        "content": "Content"
      },
      {
        "type": "text",
        "id": "popup_title",
        "label": "Heading",
        "default": "JOIN US?"
      },
	  {
        "type": "text",
        "id": "popup_subtitle",
        "label": "Sub-Heading",
        "default": "Sign up to our Newsletter and enjoy"
      },
      {
        "type": "image_picker",
        "id": "popup_image",
        "label": "Image",
        "info": "Does not appear on mobile in order to meet Google's [interstitial guidelines](https://webmasters.googleblog.com/2016/08/helping-users-easily-access-content-on.html) for improved SEO"
      },
      {
        "type": "richtext",
        "id": "popup_text",
        "label": "Footer Text",
        "default": "<p>Entice customers to sign up for your mailing list with discounts or exclusive offers. Include an image for extra impact.</p>"
      },
      {
        "type": "text",
        "id": "close_text",
        "label": "Close button text",
        "default": "No thanks"
      },
      {
        "type": "header",
        "content": "Newsletter"
      },
      {
        "type": "paragraph",
        "content": "Every sign up will create a Customer on your store. [View customers](/admin/customers?query=&accepts_marketing=1)."
      },
      {
        "type": "checkbox",
        "id": "enable_newsletter",
        "label": "Enable newsletter",
        "default": true
      },
      {
        "type": "header",
        "content": "Button"
      },
      {
        "type": "text",
        "id": "button_label",
        "label": "Button label",
        "default": "Optional button"
      },
      {
        "type": "url",
        "id": "button_link",
        "label": "Button link"
      },
      {
        "type": "checkbox",
        "id": "enable_button",
        "label": "Enable button",
        "default": false
      }
    ],
    "blocks" : []
  }
{% endschema %}
<style>
  #NewsletterPopup-newsletter-popup.modal {
    z-index: 100001;
	}
  .modal-open .modal:before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #e6e6e6;
    animation: overlay-on 0.5s forwards;
    cursor: pointer;
}
  .modal--square .modal__centered-content {
  	padding: 0 !important;
  }
  #newsletter-newsletter-popup .input-group.newsletter__input-group.custom-newsletter-group {
    flex-direction: column;
	}
#newsletter-newsletter-popup .input-group-btn {
    margin-top: 20px;
    display: block;
	}
#newsletter-newsletter-popup .btn {
  	width: 95%;
	display: block;
  }
.newslatter-popup {
	display: flex;
    margin: 0;
    padding: 0;
    flex-direction: row;
    flex: 1;
    position: relative;
    height: 475px; 
  	width: 740px;
  	overflow: hidden;
		}

.newslatter-popup-left-col {
    height: 100%;
    background-size: cover;
    background-repeat: no-repeat;
    flex-direction: column;
	}

 .newslatter-popup .popup-text-box h4 {
  	font-size: 16px;
	font-weight: 500;
	letter-spacing: 0.2em;
  	}
  .newslatter-popup .popup-text-box h2	{
    font-size: 45px;
	font-weight: 500;
    }
 .popup-footer-text p {
    text-align: center;
    font-size: 13px;
    font-style: italic;
    line-height: 18px;
  }
  
  @media (min-width: 769px){
    .popup-text-box {
       	margin: 30px;
      	text-align: center;
    }
    .newslatter-popup-right-col {
		width: 50%;	
	}
    .newslatter-popup-left-col {
		width: 50%;
	}
  }
 @media (max-width: 768px){ 
.newslatter-popup  {
  width: 90vw;
    height: auto;
  }
  .popup-text-box {
   	margin: 20px;
    text-align: center;
   }  
   .modal--mobile-friendly {
   	top:8%;
   }
 }
	</style>
<script>
if(document.querySelector('.popup-cta div.note--success')){
  document.getElementsByClassName("custom-newsletter-group")['0'].style.display = "none";
}
</script>